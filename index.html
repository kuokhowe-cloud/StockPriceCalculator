<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stock Return Comparison (Auto-Calc)</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 16px;
      background: #f9f9fb;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 24px;
      font-size: 1.6rem;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: space-between;
    }
    .scenario {
      flex: 1;
      min-width: 280px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .scenario h2 {
      margin-top: 0;
      font-size: 1.25rem;
      color: #007bff;
      text-align: center;
    }
    label {
      display: block;
      margin-top: 16px;
      font-size: 0.95rem;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
    }
    .result-box {
      margin-top: 20px;
      padding: 16px;
      background: #f0f8ff;
      border-radius: 8px;
      display: none;
    }
    .result-box h3 {
      margin-top: 0;
      font-size: 1.1rem;
    }
    .result-value {
      font-weight: bold;
      font-size: 1.1rem;
      color: #0d6efd;
    }
    @media (max-width: 600px) {
      .container {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <h1>Stock 5-Year Return Comparison</h1>

  <div class="container">
    <!-- Scenario A -->
    <div class="scenario">
      <h2>Scenario A</h2>
      <label>Stock Name: <input type="text" id="nameA" value="Netflix – Optimistic"></label>
      <label>Current Price ($): <input type="number" id="priceA" value="1210.61" step="0.01"></label>
      <label>LTM EPS ($): <input type="number" id="epsA" value="23.49" step="0.01"></label>
      <label>EPS Growth Rate (%): <input type="number" id="growthA" value="20" step="0.1"></label>
      <label>Future P/E Ratio: <input type="number" id="peA" value="40" step="0.1"></label>
      
      <div id="resultA" class="result-box">
        <h3><span id="nameOutA">Netflix – Optimistic</span> Results</h3>
        <p>EPS in Year 5: <span class="result-value" id="eps5A">58.45</span></p>
        <p>Price in Year 5: <span class="result-value" id="price5A">2,338.03</span></p>
        <p>Annualised Return: <span class="result-value" id="returnA">14.07%</span></p>
      </div>
    </div>

    <!-- Scenario B -->
    <div class="scenario">
      <h2>Scenario B</h2>
      <label>Stock Name: <input type="text" id="nameB" value="Netflix – Conservative"></label>
      <label>Current Price ($): <input type="number" id="priceB" value="1210.61" step="0.01"></label>
      <label>LTM EPS ($): <input type="number" id="epsB" value="23.49" step="0.01"></label>
      <label>EPS Growth Rate (%): <input type="number" id="growthB" value="15" step="0.1"></label>
      <label>Future P/E Ratio: <input type="number" id="peB" value="30" step="0.1"></label>
      
      <div id="resultB" class="result-box">
        <h3><span id="nameOutB">Netflix – Conservative</span> Results</h3>
        <p>EPS in Year 5: <span class="result-value" id="eps5B">47.25</span></p>
        <p>Price in Year 5: <span class="result-value" id="price5B">1,417.40</span></p>
        <p>Annualised Return: <span class="result-value" id="returnB">3.20%</span></p>
      </div>
    </div>
  </div>

  <script>
    // Auto-calculate on any input change
    function setupAutoCalc(scenario) {
      const fields = ['name', 'price', 'eps', 'growth', 'pe'];
      fields.forEach(field => {
        const el = document.getElementById(field + scenario);
        if (el) {
          el.addEventListener('input', () => calculate(scenario));
        }
      });
    }

    function calculate(scenario) {
      const prefix = scenario;
      const nameInput = document.getElementById(`name${prefix}`);
      const name = nameInput ? nameInput.value || `Scenario ${prefix}` : `Scenario ${prefix}`;

      const currentPrice = parseFloat(document.getElementById(`price${prefix}`).value);
      const ltmEps = parseFloat(document.getElementById(`eps${prefix}`).value);
      const growthRate = parseFloat(document.getElementById(`growth${prefix}`).value) / 100;
      const futurePe = parseFloat(document.getElementById(`pe${prefix}`).value);

      const resultBox = document.getElementById(`result${prefix}`);
      const nameOut = document.getElementById(`nameOut${prefix}`);
      const eps5El = document.getElementById(`eps5${prefix}`);
      const price5El = document.getElementById(`price5${prefix}`);
      const returnEl = document.getElementById(`return${prefix}`);

      // Update name first
      if (nameOut) nameOut.textContent = name;

      // Validate numbers
      if (isNaN(currentPrice) || isNaN(ltmEps) || isNaN(growthRate) || isNaN(futurePe)) {
        resultBox.style.display = 'none';
        return;
      }

      // Perform calculations
      const eps5 = ltmEps * Math.pow(1 + growthRate, 5);
      const price5 = eps5 * futurePe;
      const annualReturn = Math.pow(price5 / currentPrice, 1/5) - 1;

      // Update results
      eps5El.textContent = eps5.toFixed(2);
      price5El.textContent = price5.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
      returnEl.textContent = (annualReturn * 100).toFixed(2) + '%';

      // Show result box
      resultBox.style.display = 'block';
    }

    // Initialize auto-calc for both scenarios
    document.addEventListener('DOMContentLoaded', () => {
      setupAutoCalc('A');
      setupAutoCalc('B');

      // Run initial calculation
      calculate('A');
      calculate('B');
    });
  </script>
</body>
</html>
